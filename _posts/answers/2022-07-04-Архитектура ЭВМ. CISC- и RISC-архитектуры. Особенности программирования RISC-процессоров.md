---
layout: post
title: "Архитектура ЭВМ. CISC- и RISC-архитектуры. Особенности программирования RISC-процессоров"
categories: sppo-questions pors-questions
---

## Архитектура ЭВМ

**Архитектура ЭВМ** – это модель, устанавливающая принципы организации вычислительной системы, состав, порядок и
взаимодействие основных частей ЭВМ, функциональные возможности, удобство эксплуатации, стоимость, надежность.

Любая ЭВМ, в том числе и ПК, для выполнения своих функций должна иметь минимальный набор функциональных блоков. Это блок
для выполнения арифметических и логических операций; блок для хранения информации (память) или запоминающее устройство;
устройства для ввода исходных данных и для вывода результатов. Так как все эти устройства должны синхронно выполнять
нужные действия, ими надо управлять. Поэтому в структуре любой ЭВМ необходимо иметь также устройство управления.

Все перечисленные блоки с учетом того, что в запоминающем устройстве выделяется два уровня (внутренний и внешний),
полностью соответствуют составу классической фон-неймановской структуры ЭВМ, которая уже более полувека составляет
основу вычислительных машин (рис. 4.1).

![Классическая структура ЭВМ](/assets/q11-1.png)

Жирные стрелки – передача информации; тонкие стрелки – передача управляющих сигналов; АЛУ – блок для выполнения
арифметических и логических операций; ЗУ – запоминающее устройство; УУ – устройство управления; Увв – устройство ввода
информации; Увыв – устройство вывода информации

**Структура ЭВМ** определяет совокупность функциональных элементов ЭВМ и способ установления связей между ними. В
современных ЭВМ устройство для выполнения арифметических и логических операций и устройство управления объединены в
центральный процессор. Взамен ограниченного набора устройств ввода-вывода, имеющихся в ЭВМ первых поколений, в
современных машинах имеется большой арсенал устройств (разнообразные накопители на магнитных, оптических и
магнитооптических дисках, сканеры, клавиатура, мышь, джойстик, принтеры, плоттеры, графопостроители). Иерархия
запоминающих устройств представлена еще большим количеством уровней.

**Аппаратное обеспечение (hardware)** – совокупность технических средств, используемых в процессе функционирования ЭВМ и
взаимодействующих друг с другом.

Структурно аппаратное обеспечение современной ЭВМ, в том числе ПК, состоит из двух основных частей: центральной и
периферийной. К центральной части обычно относят центральный процессор и основную память, поскольку именно на их основе
реализуется принцип программного управления.

**Центральный процессор** обеспечивает выполнение процедур обработки данных и программное управление этим процессом. Он
включает арифметико-логическое устройство, устройство управления, собственные запоминающие устройства (регистры,
кэш-память).

**Арифметико-логическое устройство** (АЛУ) – часть процессора, обеспечивающая выполнение процедур преобразования данных.

**Устройство управления** (УУ) – часть процессора, обеспечивающая управление процессом обработки данных.

УУ выбирает команды из основной памяти, интерпретирует тип команды и запускает нужную схему АЛУ.

**Запоминающие устройства процессора** – устройства, обеспечивающие хранение данных.

**Основная память** ЭВМ включает оперативную и постоянную память.

**Оперативная память** – устройство, обеспечивающее временное хранение команд и данных в процессе выполнения программы.

**Постоянная память** – устройство, обеспечивающее постоянное хранение и возможность считывания критически важной для
функционирования ЭВМ информации.

Основная память и запоминающие устройства процессора относятся к **внутренним** запоминающим устройствам. Они
непосредственно взаимодействуют с процессором, имеют высокое быстродействие и относительно небольшую емкость.

Все остальные устройства ЭВМ относятся к периферийной части и называются **внешними** или **периферийными**. Внешние
устройства делятся на устройства ввода-вывода и внешние запоминающие устройства.

**Устройства ввода-вывода** обеспечивают ввод исходных данных и вывод результатов из центральных устройств ЭВМ.

**Внешние запоминающие устройства** (ВЗУ) имеют большую емкость и относительно низкое быстродействие. К ним относятся
накопители на магнитных дисках (НМЛ), накопители на магнитной ленте (НМЛ), накопители на оптических дисках (ПОД),
накопители на основе флэш-памяти.

В одной ЭВМ может использоваться от единиц до нескольких сотен внешних устройств. Состав этих устройств, как правило,
переменный и определяется составом решаемых на конкретной ЭВМ задач. Поэтому принято говорить о конфигурации ЭВМ,
понимая под этим термином конкретный состав ее устройств с учетом их характеристик.

Принято, что передача информации из периферийных устройств в ядро ПК называется операцией ввода. Передача информации из
ядра ПК в периферийные устройства называется операцией вывода.

Аппаратная платформа – совокупность технических средств, определяющих среду функционирования конкретных программ.
Основой аппаратной платформы является совокупность системной (материнской) платы и тип используемого процессора.

## CISC и RISC архитектура

Аббревиатура CISC обозначает Complex Instruction Set Computer, а RISC — Reduced Instruction Set Computer.

### CISC

CISC (англ. Complex Instruction Set Computing) — концепция проектирования процессоров, которая характеризуется следующим
набором свойств:

- большим числом различных по формату и длине команд;
- введением большого числа различных режимов адресации;
- обладает сложной кодировкой инструкции.

Процессору с архитектурой CISC приходится иметь дело с более сложными инструкциями неодинаковой длины. Выполнение
одиночной CISC-инструкции может происходить быстрее, однако обрабатывать несколько таких инструкций параллельно сложнее.

Архитектура CISC предполагает:

- минимальное количество регистров общего характера;
- максимальный объем простых машинных инструкций;
- присутствие сложных инструкций, которые функционально напоминают операторы высокоуровневых языков программирования;
- различные варианты адресации инструкций;
- принятие различных форматов инструкций;
- присутствие возможности обрабатывать команды «регистр-память».

Применение архитектуры CISC делает компиляцию программ намного проще за счет уменьшения исполняемых модулей. Но такая
архитектура имеет один существенный недостаток — она не дает реализовать новейшие подходы для ускорения работы
процессоров, например, такие, которые позволяют организовать в процессоре в определенный момент времени несколько
одновременно выполняемых инструкций.

Архитектура CISC с технической стороны выглядит намного сложнее, чем архитектура RISC, отсюда и вытекают ее плюсы и
минусы, например:

- она является более «мощной», так как позволяет заменять несколько похожих простых инструкций на одну аналогичную, но
  сложную, при этом не дает возможность ускорять производительные процессы за счет внедрения новых технологий обработки
  инструкций;
- процессоры с архитектурой CISC будут немного дороже, чем процессоры с архитектурой RISC с аналогичными параметрами.

**Достоинства архитектуры CISC**:

1. Компактность наборов инструкций уменьшает размер программ и уменьшает количество обращений к памяти.
2. Наборы инструкций включают поддержку конструкций высокоуровневого программирования.

**Недостатки архитектуры CISC**:

1. Нерегулярность потока команд.
2. Высокая стоимость аппаратной части.
3. Сложности с распараллеливанием вычислений.

### RISC

RISC (Reduced Instruction Set Computing). Процессор с сокращенным набором команд. Система команд имеет упрощенный вид.
Все команды одинакового формата с простой кодировкой. Обращение к памяти происходит посредством команд загрузки и
записи, остальные команды типа регистр-регистр. Команда, поступающая в CPU, уже разделена по полям и не требует
дополнительной дешифрации.

Часть кристалла освобождается для включения дополнительных компонентов. Степень интеграции ниже, чем в предыдущем
архитектурном варианте, поэтому при высоком быстродействии допускается более низкая тактовая частота. Команда меньше
загромождает ОЗУ, CPU дешевле. Программной совместимостью указанные архитектуры не обладают. Отладка программ на RISC
более сложна. Данная технология может быть реализована программно-совместимым с технологией CISC (например,
суперскалярная технология).

Архитектура RISC появилась уже после CISC, так как технологии шагнули вперед: открывались новые возможности, поэтому
пришла необходимость что-то менять и в процессорах.

Многие разработчики стали замечать, что потенциал архитектуры CISC не использовался полностью, поэтому множество ее
сложных инструкций просто оставались без дела. Плюс была явная сложность в правильном выборе нужной инструкции для
компилирования конкретной программы — это также вводило в ступор. Поэтому было принято решение создать процессор с
архитектурой, в основе которой будет находиться множество простых инструкций.

То есть основной подход архитектуры RISC заключается в том, чтобы заменить сложные инструкции набором простых,
соответственно, сократить объем сложных команд для самого процессора. При этом «длина» простых инструкций является
постоянной, а время на их выполнение примерно одинаковым. За счет этого в архитектуре RISC удалось внедрить процесс
конвейеризации.

Конвейеризация процессора позволяет выполнять несколько инструкций одновременно, но в разных тактах. Объясним, как это
работает, на примере работы кассы в супермаркете.

Допустим, чтобы покупатель совершил покупку на кассе, ему нужно выполнить 3 такта:

- Выложить товар на ленту.
- Оплатить товар через терминал.
- Сложить товар в свой пакет.

Без внедрения конвейеризации процесс будет происходить следующим образом: пока один покупатель не пройдет все три такта
на кассе — следующий будет ждать. То есть, пока один покупатель не сложит свой оплаченный товар в пакет, другой не
начнет выкладывать свой товар на ленту. Но если внедрить конвейеризацию, то все будет происходить по-другому.

Первый покупатель выкладывает товар на ленту и переходит ко второму такту — оплате через терминал. Пока он оплачивает,
второй покупатель начинает выкладывать товар на ленту. Первый покупатель оплачивает товар и начинает складывать его в
пакет. Пока он это делает, второй покупатель начинает оплачивать свой товар через терминал, а третий уже начинает
выкладывать свой товар на ленту.

Точно так же происходит и с инструкциями в процессорах с архитектурой RISC. За счет конвейеризации архитектура RISC
работает намного быстрее, чем архитектура CISC. Это заметно, даже если архитектура RISC должна выполнить 5-6 инструкций
вместо одной в CISC.

Архитектуру RISC применяют ARM-процессоры. Кстати, в 2020-м году с большим отрывом по производительности среди всех
суперкомпьютеров мира победил суперкомпьютер, который использовал в качестве своей «начинки» ARM-процессоры с
архитектурой RISC.

Может возникнуть резонный вопрос: «Если архитектура RISC настолько хороша и работает быстрее, то почему ее не применяют
во всех современных компьютерах?». Объясняется все очень просто: исторически так сложилось. То есть до какого-то времени
в компьютерах применяли только архитектуру CISC, а это значит, что все старые и многие новые программы были написаны
именно для этой архитектуры и они не будут работать в RISC. Огромное количество такого ПО является проприетарными
программами, а это значит, что, для того чтобы они заработали в RISC — этого должны захотеть их создатели и,
соответственно, их переделать.

В итоге получается, что если сейчас использовать компьютер с RISC-процессором, то для него будет очень ограниченное
количество программного обеспечения, что доставит массу неудобств пользователям. Поэтому смену архитектуры разом должны
захотеть и производители процессоров, и производители ПО. Пока до этого далеко, но все к этому идет.

## Особенности программирования RISC-процессоров

Характерные особенности RISC-процессоров

- Фиксированная длина машинных инструкций (например, 32 бита) и простой формат команды.
- Специализированные команды для операций с памятью — чтения или записи. Операции вида Read-Modify-Write (
  «прочитать-изменить-записать») отсутствуют. Любые операции «изменить» выполняются только над содержимым регистров (т.
  н. архитектура load-and-store).
- Большое количество регистров общего назначения (32 и более).
- Отсутствие поддержки операций вида «изменить» над укороченными типами данных — байт, 16-разрядное слово.
- Отсутствие микропрограмм внутри самого процессора. То, что в CISC-процессоре исполняется микропрограммами, в
  RISC-процессоре исполняется как обыкновенный (хотя и помещённый в специальное хранилище) машинный код, не отличающийся
  принципиально от кода ядра ОС и приложений.

