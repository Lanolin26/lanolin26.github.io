---
layout: post
title: "Адресация в сетях TCP/IP: локальные, сетевые и доменные адреса, классы IP-адресов, маскирование IP-адресов"
categories: pors-questions
author: Kiselev Artem (Lanolin26)
---

[comment]: <> (http://koi.tspu.ru/koi_books/gazizov2/7_Adresaciya_v_cetyah_TCP_IP.htm)
[comment]: <> (https://www.opennet.ru/docs/RUS/ip_network/glava_3.html)

## Типы адресов: физический (MAC-адрес), сетевой (IP-адрес) и символьный (DNS-имя)

Каждый компьютер в сети TCP/IP имеет адреса трех уровней:

- Локальный адрес узла, определяемый технологией, с помощью которой построена отдельная
  сеть, в которую входит данный узел. Для узлов, входящих в локальные сети - это МАС-адрес
  сетевого адаптера или порта маршрутизатора, например, 11-А0-17-3D-BC-01. Эти адреса
  назначаются производителями оборудования и являются уникальными адресами, так как управляются
  централизовано. Для всех существующих технологий локальных сетей МАС-адрес имеет формат 6
  байтов: старшие 3 байта - идентификатор фирмы производителя, а младшие 3 байта назначаются
  уникальным образом самим производителем. Для узлов, входящих в глобальные сети, такие как
  Х.25 или frame relay, локальный адрес назначается администратором глобальной сети.

- IP-адрес, состоящий из 4 байт (IPv4), например, 109.26.17.100. Этот адрес используется на сетевом
  уровне. Он назначается администратором во время конфигурирования компьютеров и маршрутизаторов.
  IP-адрес состоит из двух частей: номера сети и номера узла. Номер сети может быть выбран администратором
  произвольно, либо назначен по рекомендации специального подразделения Internet
  (Network Information Center, NIC), если сеть должна работать как составная часть Internet.
  Обычно провайдеры услуг Internet получают диапазоны адресов у подразделений NIC, а затем распределяют
  их между своими абонентами.

  Номер узла в протоколе IP назначается независимо от локального адреса узла. Деление IP-адреса на поле
  номера сети и номера узла - гибкое, и граница между этими полями может устанавливаться весьма произвольно.
  Узел может входить в несколько IP-сетей. В этом случае узел должен иметь несколько IP-адресов, по числу
  сетевых связей. Таким образом IP-адрес характеризует не отдельный компьютер или маршрутизатор, а одно
  сетевое соединение.

- Символьный идентификатор-имя, например, SERV1.IBM.COM. Этот адрес назначается администратором и состоит
  из нескольких частей, например, имени машины, имени организации, имени домена. Такой адрес, называемый
  также DNS-именем, используется на прикладном уровне, например, в протоколах FTP или telnet.

## Классы IP

Какая часть адреса относится к номеру сети, а какая - к номеру узла, определяется значениями первых бит
адреса. Значения этих бит являются также признаками того, к какому классу относится тот или иной IP-адрес.

![Структура IP-адреса](/assets/q2-1.jpg "Структура IP-адреса")

Если адрес начинается с 0, то сеть относят к классу А и номер сети занимает один байт, остальные 3 байта
интерпретируются как номер узла в сети. Сети класса А имеют номера в диапазоне от 1 до 126. (Номер 0 не
используется, а номер 127 зарезервирован для специальных целей). Сетей класса А немного, зато количество
узлов в них может достигать 224, то есть 16 777 216 узлов.

Если первые два бита адреса равны 10, то сеть относится к классу В. В сетях класса В под номер сети и под
номер узла отводится по 16 бит, то есть по 2 байта. Таким образом, сеть класса В является сетью средних
размеров с максимальным числом узлов 216, что составляет 65 536 узлов.

Если адрес начинается с последовательности 110, то это сеть класса С. В этом случае под номер сети
отводится 24 бита, а под номер узла - 8 бит. Сети этого класса наиболее распространены, число узлов в
них ограничено 28, то есть 256 узлами.

Если адрес начинается с последовательности 1110, то он является адресом класса D и обозначает особый,
групповой адрес - multicast. Если в пакете в качестве адреса назначения указан адрес класса D, то
такой пакет должны получить все узлы, которым присвоен данный адрес.

Если адрес начинается с последовательности 11110, то это значит, что данный адрес относится к классу Е.
Адреса этого класса зарезервированы для будущих применений.

![Характеристики адресов разного класса](/assets/q2-2.jpg "Характеристики адресов разного класса")

### Особые IP-адреса

В протоколе IP существует несколько соглашений об особой интерпретации IP-адресов.

- Если весь IP-адрес состоит только из двоичных нулей (0.0.0.0), то он обозначает адрес того узла, который
  сгенерировал этот пакет; этот режим используется только в некоторых сообщениях ICMP.

- Если в поле номера сети стоят только нули (192.190.21.0), то по умолчанию считается, что узел назначения
  принадлежит той же самой сети, что и узел, который отправил пакет.

- Если все двоичные разряды IP-адреса равны 1 (255.255.255.255), то пакет с таким адресом назначения должен
  рассылаться всем узлам, находящимся в той же сети, что и источник этого пакета. Такая рассылка называется
  ограниченным широковещательным. сообщением (limited broadcast).

- Если в поле номера узла назначения стоят только единицы, то пакет, имеющий такой адрес, рассылается всем
  узлам сети с заданным номером сети. Например, пакет с адресом 192.190.21.255 доставляется всем узлам сети
  192.190.21.0. Такая рассылка называется широковещательным сообщением (broadcast).

## Использование масок в IP-адресации

Традиционная схема деления IP-адреса на номер сети и номер узла основана на понятии класса, который определяется
значениями нескольких первых бит адреса. Именно потому, что первый байт адреса 185.23.44.206 попадает в диапазон
128-191, мы можем сказать, что этот адрес относится к классу В, а значит, номером сети являются первые два байта,
дополненные двумя нулевыми байтами - 185.23.0.0, а номером узла - 0.0.44.206.

А что если использовать какой-либо другой признак, с помощью которого можно было ,бы более гибко устанавливать
границу между номером сети и номером узла? В качестве такого признака сейчас получили широкое распространение
маски. Маска - это число, которое используется в паре с IP-адресом; двоичная запись маски содержит единицы в
тех разрядах, которые должны в IP-адресе интерпретироваться как номер сети. Поскольку номер сети является
цельной частью адреса, единицы в маске также должны представлять непрерывную последовательность.

Для стандартных классов сетей маски имеют следующие значения:

- класс А - 11111111.00000000.00000000.00000000 (255.0.0.0);
- класс В - 11111111.11111111.00000000.00000000 (255.255.0.0);
- класс С - 11111111.11111111.11111111.00000000 (255.255.255.0).

> ПРИМЕЧАНИЕ Для записи масок используются и другие форматы, например, удобно интерпретировать значение
> маски, записанной в шестнадцатеричном коде: FF.FF.OO.OO - маска для адресов класса В. Часто встречается
> и такое обозначение 185.23.44.206/16 - эта запись говорит о том, что маска для этого адреса содержит 16
> единиц или что в указанном IP-адресе под номер сети отведено 16 двоичных разрядов.

Снабжая каждый IP-адрес маской, можно отказаться от понятий классов адресов и сделать более гибкой систему
адресации. Например, если рассмотренный выше адрес 185.23.44.206 ассоциировать с маской 255.255.255.0, то
номером сети будет 185.23.44.0, а не 185.23.0.0, как это определено системой классов.

В масках количество единиц в последовательности, определяющей границу номера сети, не обязательно должно
быть кратным 8, чтобы повторять деление адреса на байты. Пусть, например, для IP-адреса 129.64.134.5
указана маска 255.255.128.0, то есть в двоичном виде:

    IP-адрес 129.64.134.5 - 10000001.01000000.10000110.00000101
    Маска 255.255.128.0 - 11111111.11111111.10000000.00000000

Если игнорировать маску, то в соответствии с системой классов адрес 129.64.134.5 относится к классу В, а
значит, номером сети являются первые 2 байта - 129.64.0.0, а номером узла - 0.0.134.5.

Если же использовать для определения границы номера сети маску, то 17 последовательных единиц в маске,
«наложенные» на IP-адрес, определяют в качестве номера сети в двоичном выражении число
10000001.01000000.10000000.00000000 или в десятичной форме записи - номер сети 129.64.128.0, а номер узла 0.0.6.5.

Механизм масок широко распространен в IP-маршрутизации, причем маски могут использоваться для самых разных
целей. С их помощью администратор может структурировать свою сеть, не требуя от поставщика услуг дополнительных
номеров сетей. На основе этого же механизма поставщики услуг могут объединять адресные пространства нескольких
сетей путем введения так называемых «префиксов» с целью уменьшения объема таблиц маршрутизации и повышения за
счет этого производительности маршрутизаторов.
