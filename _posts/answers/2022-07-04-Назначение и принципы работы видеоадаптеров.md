---
layout: post
title: "Назначение и принципы работы видеоадаптеров"
categories: pors-questions
---

## V1

## Назначение и принцип работы видеоадаптера

Как уже упоминалось, видеоадаптер (графический адаптер, видеокарта) является промежуточным звеном между компьютером и монитором. Основное назначение видеоадаптера – формирование изображения на экране монитора под управлением программы компьютера, т.е. на него возлагаются функции формирования сигналов, обеспечивающих вывод изображения.

Рассмотрим в общих чертах работу адаптера при выводе монохромного изображения. Цифровой образ текущего кадра формируется центральным процессором и в виде матрицы двоичных чисел записывается в кадровый буфер видеопамяти. Строки матрицы отождествляются со строками растра изображения. Каждая ячейка матрицы соответствует точке (пикселу) на экране монитора, а ее содержимое (двоичное число) отражает яркость засветки точки. Видеоадаптер последовательно считывает содержимое каждой ячейки и формирует видеосигнал, который управляет яркостью электронного луча. Считывание ячеек осуществляется синхронно с перемещением луча по экрану монитора. В результате яркость каждого пиксела на экране оказывается пропорциональной содержимому соответствующей ячейки памяти видеоадаптера. После считывания ячеек каждой строки матрицы формируется импульс обратного хода луча по горизонтали, а по окончании считывания всех ячеек кадрового буфера – импульс обратного хода луча по вертикали. Таким образом, частоты строчной и кадровой разверток задаются видеоадаптером и должны поддерживаться блоком разверток монитора.

С момента появления первых компьютеров видеоадаптеры претерпели значительные изменения. Единственное назначение первых видеоадаптеров состояло в обеспечении вывода простейших изображений. По мере развития компьютерной техники на видеоадаптеры стали возлагаться многие дополнительные функции, например формирование и аппаратное ускорение обработки изображений двумерной и трехмерной графики, прием и обработка телевизионных и других динамических изображений. Их реализация потребовала использования сложных схемных решений. Поэтому современные адаптеры (например, типа SVGA) являются многокомпонентными универсальными устройствами, обладающие широкими функциональными возможностями.

## V2

## 2. Назначение устройства

Главная функция, выполняемая видеокартой, преобразование полученной от центрального процессора информации и команд в формат, который воспринимается электроникой монитора, для создания изображения на экране. Монитор обычно является неотъемлемой частью любой системы, с помощью которого пользователь получает визуальную информацию. Таким образом, связку видеоадаптер и монитор можно назвать видеоподсистемой компьютера. То, как эти компоненты справляются со своей работой, и в каком виде пользователь получает информацию, включая графику, текст, живое видео, влияет на производительность как на самого пользователя и его здоровье, так и на производительность всего компьютера в целом. Вот почему при покупке видеоподсистемы необходимо сделать разумный выбор.

## 3. Принцип работы видеоадаптера

Прежде чем стать изображением на мониторе, двоичные цифровые данные обрабатываются центральным процессором, затем через шину данных направляются в видеоадаптер, где они обрабатываются и преобразуются в аналоговые данные и уже после этого направляются в монитор и формируют изображение. Сначала данные в цифровом виде из шины попадают в видеопроцессор, где они начинают обрабатываться. После этого обработанные цифровые данные направляются в видеопамять, где создается образ изображения, которое должно быть выведено на дисплее. Затем, все еще в цифровом формате, данные, образующие образ, передаются в RAMDAC, где они конвертируются в аналоговый вид, после чего передаются в монитор, на котором выводится требуемое изображение.

Таким образом, почти на всем пути следования цифровых данных над ними производятся различные операции преобразования, сжатия и хранения. Оптимизируя эти операции, можно добиться повышения производительности всей видеоподсистемы. Лишь последний отрезок пути, от RAMDAC до монитора, когда данные имеют аналоговый вид, нельзя оптимизировать.

Рассмотрим подробнее этапы следования данных от центрального процессора системы до монитора.

1. Скорость обмен данными между CPU и графическим процессором напрямую зависит от частоты, на которой работает шина, через которую передаются данные. Рабочая частота шины зависит от чипсета материнской платы. Для видеоадаптеров оптимальными по скорости являются шина PCI и AGP. При существующих версиях чипсетов шина PCI может иметь рабочие частоты от 25MHz до 66MHz, иногда до 83MHz(обычно 33MHz), а шина AGP работает на частотах 66MHz и 133MHz. Чем выше рабочая частота шины, тем быстрее данные от центрального процессора системы дойдут до графического процессора видеоадаптера.

2. Ключевой момент, влияющий на производительность видеоподсистемы, вне зависимости от специфических функций различных графических процессоров, это передача цифровых данных, обработанных графическим процессором, в видеопамять, а оттуда в RAMDAC. Самое узкое место любой видеокарты - это видеопамять, которая непрерывно обслуживает два главных устройства видеоадаптера, графический процессор и RAMDAC, которые вечно перегружены работой. В любой момент, когда на экране монитора происходят изменения (иногда они происходят в непрерывном режиме, например движение указателя мыши, мигание курсора в редакторе и т.д.), графический процессор обращается к видеопамяти. В то же время, RAMDAC должен непрерывно считывать данные из видеопамяти, чтобы изображение не пропадало с экрана монитора. Поэтому, чтобы увеличить производительность видеопамяти, производители применяют различные технические решения. Например, используют различные типы памяти, с улучшенными свойствами и продвинутыми возможностями, например VRAM, WRAM, MDRAM, SGRAM, или увеличивают ширину шины данных, по которой графический процессор или RAMDAC обмениваются информацией с видеопамять, используя 32 разрядную, 64 разрядную или 128 разрядную видеошину.

Чем более высокое разрешение экрана используется и чем больше глубина представления цвета, тем больше данных требуется передать из графического процессора в видеопамять и тем быстрее данные должны считываться RAMDAS для передачи аналогового сигнала в монитор. Нетрудно заметить, что для нормальной работы видеопамять должна быть постоянно доступна для графического процессора и RAMDAS, которые должны постоянно осуществлять чтение и запись.

В нормальных условиях доступ RAMDAS к видеопамяти на максимальной частоте возможен лишь после того, как графический процессор завершит обращение к памяти (операцию чтения или записи), т.е. RAMDAS вынужден дожидаться, когда наступит его очередь обратиться с запросом к видеопамяти для чтения и наоборот. 
