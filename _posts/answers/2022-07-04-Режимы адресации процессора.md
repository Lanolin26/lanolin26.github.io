---
layout: post
title: "Режимы адресации процессора"
categories: sppo-questions pors-questions
---

При выполнении программы многим командам требуется доступ к памяти для выборки данных, записи промежуточных
и окончательных результатов вычислений. Для любого такого обращения, что уже отмечалось выше, в команде
необходимо как-то указать адрес операнда. Поэтому способ формирования адресов операндов в значительной
степени определяет способность ЭВМ эффективно осуществлять обработку информации. Объем памяти в ЭВМ постоянно
растет и поэтому существенной становится проблема сокращения длины команды. Для преодоления ограничений по
длине команды и повышения эффективности обработки информации в ЭВМ имеется множество режимов адресации,
которые позволяют

1. определять полный адрес памяти меньшим числом бит, тем самым, сокращая длину команды;
2. обращаться к ячейкам памяти, адреса которых вычисляются во время выполнения программы, что обеспечивает
   удобный доступ к данным различной структуры;
3. вычислять адрес памяти относительно позиции команды или относительно другого объекта таким образом, что
   программу можно загружать в любую область памяти без всяких изменений адресов в программе.

Рассмотрим основные способы формирования адресов операндов в современных ЭВМ и опишем их основные особенности.

**Непосредственная адресация.** В этом самом простом режиме адресации операнд, подлежащий обработке, размещается
непосредственно в самой команде и передается в процессор следом за выборкой кода операции команды. Данный режим
адресации применяется тогда, когда операндом является константа, не изменяющаяся во время выполнения программы.
Примером применения такого режима адресации может служить загрузка некоторого адреса в регистр процессора.

**Абсолютная или прямая адресация.** Этот режим адресации также достаточно прост. Часть команды является адресом
операнда в памяти. Из-за своей простоты этот режим используется во многих ЭВМ. Этот способ адресации достаточно
быстр, так как при поиске адреса не требуется никаких дополнительных вычислений. Однако указание полного прямого
адреса операнда в команде требует много бит, особенно в ЭВМ с большим объемом адресного пространства. Кроме этого
стоит отметить, что если в командах программы указаны полные адреса ее операндов, программа оказывается “жестко
привязанной” к конкретным адресам памяти. Это не всегда оправдано, так как часто желательно иметь возможность
размещать программы в произвольных участках памяти достаточного размера, к тому же иногда возникает необходимость
переместить программу на другое место в памяти. Поэтому для устранения этих недостатков многие ЭВМ используют
короткие разновидности прямой адресации (см. ниже относительную адресацию). Такие методы адресации обеспечивают
доступ к ограниченной части адресного пространства.

**Регистровая адресация.** В данном режиме операнд находится в одном из регистров процессора и в команде просто
указывается номер требуемого регистра. Команда с регистровой адресацией будет достаточно короткой. Кроме того,
для выборки операндов процессору не требуется достаточно длительная операция обращения к памяти, поскольку регистры
встроены в сам процессор. По этим причинам команды с регистровой адресацией являются самыми “быстрыми” командами.
Для увеличения скорости работы программ необходимо стремиться к тому, чтобы часто используемые данные по возможности
постоянно находились в регистрах центрального процессора.

**Регистровая косвенная адресация.** В этом режиме адресации регистр или пара регистров процессора содержат адрес
операнда, и в команде указывается номер регистра с адресом. Адрес может храниться в специализированном указательном
регистре или регистре общего назначения. Этот способ адресации получил очень широкое распространение и по быстродействию
приближается к прямой адресации, так как адрес содержится внутри регистра процессора и для его выборки не требуется
производить сравнительно длительную операцию обращения к памяти. Загрузка указательных регистров производится либо
с использованием непосредственной адресации, либо адрес вычисляется в процессе работы программы, что требуется при
просмотре массивов, в процедурах передачи данных и т.д.

**Адресация с автоуменьшением или автоувеличением.** При адресации с автоувеличением адрес операнда вычисляется
практически так же, как и при косвенной регистровой адресации. После выборки операнда, адрес, находящийся в регистре
процессора автоматически увеличивается на 1 для указания следующего байта, на 2 - для указания поля из двух байт и т.д.,
при этом размер операнда определяется кодом операции. Отличие адресации с автоуменьшением состоит в том, что перед
выборкой операнда содержимое регистра уменьшается на 1, 2 и т.д. в соответствии с размером операнда. Эти два типа
адресации позволяют эффективно обрабатывать массивы однотипных данных.

Примерами такой адресации являются цепочечная адресация в процессоре 8086 или автоинкрементная и автодекрементная
адресация в процессорах СМ. По существу разновидностью этого метода адресации является также стековая адресация.
В процессорах СМ использование автоинкрементного режима по отношению к программному счетчику (который обладает там
теми же свойствами, что и любой регистр общего назначения) позволяет получить абсолютный режим адресации.

**Неявная или подразумеваемая адресация.** При таком способе адресации в команде явно не указывается адрес одного
или нескольких операндов. Операнды в командах с неявной адресацией могут находиться, например, в выделенных для
этой команды регистрах процессора, или некоторый выделенный и заранее известный регистр процессора может содержать
адрес операнда. Примерами команд с неявной адресацией могут служить многие команды микропроцессоров семейства 8086.
Рассмотрим команду организации цикла со счетчиком повторения. В этой команде не указывается явно, какой из регистров
содержит счетчик цикла и предполагается, что перед выполнением команды счетчик цикла размещен в регистре - счетчике
процессора (регистре CX). Другой пример - команды пересылки блоков данных, которые имеются у многих процессоров
(например, REP MOVSBв 8086). Адреса операндов в этой команде явно не указываются и определяются двумя индексными
регистрами процессора, куда они должны быть предварительно загружены. При выборке операндов неявно используется
адресация с автоувеличением или автоуменьшением.

**Индексная адресация** удобна для обращения к массивам и таблицам. Для образования исполнительного адреса к адресной
части команды прибавляется смещение из индексного регистра, называемое индексом (см. рис. 14). Индексный регистр
является программно - доступным, и его содержимое может изменяться, что позволяет изменять исполнительные адреса
без модификации адресной части команды. В качестве индексных регистров используются один или несколько специализированных
регистров, в некоторых ЭВМ их функции выполняют регистры общего назначения. Когда индексный режим используется для
доступа к массиву, адрес в команде соответствует базовому адресу массива, а значение индексного регистра - индексу
компоненты массива.

**Относительная адресация.** Основное назначение относительной адресации - преодолеть недостатки прямой адресации,
сохранив при этом ее внешнюю простоту и эффективность. При относительной адресации в команде указывается не полный
адрес операнда, а сокращенный адрес, обычно называемый смещением. В процессе выполнения команды полный адрес операнда
вычисляется путем суммирования смещения, указанного в команде с некоторой величиной, которая называется базовым адресом.
Существует два способа расширения адреса, указанного в короткой форме.

Первый способ называется самоопределяющейся относительной адресацией. В этом случае смещение, указанное в команде,
складывается с адресом самой команды (обычно это текущее содержимое программного счетчика). Такой способ широко
используется в командах условной передачи управления многих процессоров. Анализ программ показывает, что команды
условной передачи управления чаще всего осуществляют переход на небольшое расстояние (до плюс - минус 100 - 200 байт).
Поэтому во многих ЭВМ адрес перехода хранится в виде числа со знаком - короткого (8 бит) смещения целевого адреса
относительно адреса команды ветвления (программного счетчика). При выполнении команды смещение просто суммируется
с программным счетчиком. Применение относительной адресации в данном случае сокращает длину команды и повышает
скорость ее выполнения. Другим примером может служить относительная адресация в процессорах СМ. В командах с
относительной адресацией содержится смещение, которое при вычислении адреса операнда суммируется с содержимым
программного счетчика. Отметим, что при таком способе адресации не нужно явно указывать, откуда брать базовый
адрес (в качестве него всегда выступает программный счетчик). Поэтому этот способ адресации иногда называют
неявным базированием.

Второй вид относительной адресации называется базовой адресацией. При базовой адресации смещение, указываемое в
команде, складывается с базовым адресом, хранящимся в регистре базы процессора. Смещение обычно имеет длину
меньше, чем длина базового адреса, которая, в свою очередь, должна быть такой, чтобы в качестве базового можно
было указать любой из возможных адресов. В качестве регистра базы может использоваться специализированный регистр
базы или один из  регистров общего назначения. В любом случае одна из команд программы должна явно загрузить в
регистр базы значение базового адреса и, кроме того, программист должен тем или иным способом указать, какой из
регистров выступает в качестве базового. Поэтому этот способ адресации часто называют адресацией с явным базированием.
